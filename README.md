<div align="center">

# GoTTY

[![Go Version](https://img.shields.io/badge/Go-1.23-blue.svg)](https://golang.org)
[![Node Version](https://img.shields.io/badge/Node-22-green.svg)](https://nodejs.org)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

**å°†æ‚¨çš„ç»ˆç«¯ä½œä¸ºWebåº”ç”¨ç¨‹åºå…±äº«**

GoTTYæ˜¯ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥å°†å‘½ä»¤è¡Œå·¥å…·è½¬æ¢ä¸ºWebåº”ç”¨ç¨‹åº

</div>

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸŒ **Webç»ˆç«¯è®¿é—®** - é€šè¿‡æµè§ˆå™¨è®¿é—®æ‚¨çš„ç»ˆç«¯
- ğŸ” **èº«ä»½è®¤è¯** - æ”¯æŒåŸºæœ¬è®¤è¯ï¼ˆè‡ªå®šä¹‰ç™»å½•ç•Œé¢ï¼‰
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - å†…ç½®æ–‡ä»¶ç®¡ç†å™¨ï¼Œæ”¯æŒä¸Šä¼ /ä¸‹è½½/åˆ é™¤
- ğŸ¨ **ç°ä»£UI** - åŸºäºxterm.jsçš„ç°ä»£åŒ–æ·±è‰²ä¸»é¢˜ç•Œé¢
- ğŸ”’ **å®‰å…¨** - TLS/SSLåŠ å¯†è¿æ¥æ”¯æŒ
- ğŸ“± **å“åº”å¼** - æ”¯æŒç§»åŠ¨ç«¯è®¿é—®
- ğŸ¯ **å¯æ‹–æ‹½** - æ–‡ä»¶ç®¡ç†æŒ‰é’®æ”¯æŒæ‹–æ‹½å’Œè¾¹ç¼˜å¸é™„
- ğŸ“‚ **æ–‡ä»¶å¤¹å¯¼èˆª** - æ”¯æŒé€’å½’æµè§ˆå’Œç®¡ç†æ–‡ä»¶å¤¹

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
# å®‰è£…Goä¾èµ–
go mod download

# å®‰è£…Node.jsä¾èµ–
cd js && npm install && cd ..
```

### ç¼–è¯‘

```bash
# ç¼–è¯‘å½“å‰ç³»ç»Ÿç‰ˆæœ¬
make

# ç¼–è¯‘æ‰€æœ‰å¹³å°ï¼ˆdarwin/arm64, windows/amd64, linux/amd64ï¼‰
make all

# ç¼–è¯‘æŒ‡å®šå¹³å°
make build t="linux:amd64"
```

ç¼–è¯‘äº§ç‰©ä½äº `./release/` ç›®å½•ã€‚

### è¿è¡Œ

```bash
# ç®€å•è¿è¡Œ
./release/gotty_<os>_<arch> bash

# ä½¿ç”¨é…ç½®æ–‡ä»¶
./release/gotty_<os>_<arch> -c /path/to/config.txt bash

# æŒ‡å®šç«¯å£å’Œå…è®¸å†™å…¥
./release/gotty_<os>_<arch> --port 8080 --permit-write bash
```

è®¿é—® `http://localhost:8080/` å³å¯ä½¿ç”¨ã€‚

## ğŸ³ Dockeréƒ¨ç½²

### ä½¿ç”¨Dockeræ„å»º

```bash
# æ„å»ºé•œåƒ
docker build -t gotty:latest .

# è¿è¡Œå®¹å™¨
docker run -d -p 8080:8080 gotty:latest
```

### ä½¿ç”¨Docker Compose

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down
```

é…ç½®æ–‡ä»¶ï¼š`docker-compose.yml`

## âš™ï¸ é…ç½®

GoTTYæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶æˆ–å‘½ä»¤è¡Œå‚æ•°è¿›è¡Œé…ç½®ã€‚

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

åˆ›å»º `.gotty` æˆ–è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼š

```toml
# ç›‘å¬åœ°å€å’Œç«¯å£
address = "0.0.0.0"
port = "8080"

# å…è®¸å®¢æˆ·ç«¯å†™å…¥
permit_write = true

# å¯ç”¨åŸºæœ¬è®¤è¯
enable_basic_auth = true
credential = "admin:your_password_here"

# å¯ç”¨TLSï¼ˆå¯é€‰ï¼‰
# enable_tls = true
# tls_crt_file = "/path/to/cert.crt"
# tls_key_file = "/path/to/cert.key"

# è‡ªåŠ¨é‡è¿
enable_reconnect = true
reconnect_time = 10

# æœ€å¤§è¿æ¥æ•°ï¼ˆ0è¡¨ç¤ºæ— é™åˆ¶ï¼‰
max_connection = 0
```

å®Œæ•´é…ç½®é€‰é¡¹è¯·æŸ¥çœ‹ [.gotty](.gotty) æ–‡ä»¶ï¼ˆåŒ…å«ä¸­æ–‡æ³¨é‡Šï¼‰ã€‚

### å‘½ä»¤è¡Œå‚æ•°

```bash
./gotty --help
```

å¸¸ç”¨å‚æ•°ï¼š

| å‚æ•°                 | è¯´æ˜             | é»˜è®¤å€¼     |
| -------------------- | ---------------- | ---------- |
| `-a, --address`      | ç›‘å¬åœ°å€         | `0.0.0.0`  |
| `-p, --port`         | ç›‘å¬ç«¯å£         | `8080`     |
| `-w, --permit-write` | å…è®¸å®¢æˆ·ç«¯å†™å…¥   | `false`    |
| `-c, --config`       | é…ç½®æ–‡ä»¶è·¯å¾„     | `~/.gotty` |
| `--permit-arguments` | å…è®¸URLå‚æ•°      | `false`    |
| `--once`             | åªæ¥å—ä¸€ä¸ªå®¢æˆ·ç«¯ | `false`    |
| `--timeout`          | è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰   | `0`        |
| `--max-connection`   | æœ€å¤§è¿æ¥æ•°       | `0`        |

## ğŸ¨ åŠŸèƒ½è¯´æ˜

### 1. è‡ªå®šä¹‰ç™»å½•ç•Œé¢

å¯ç”¨åŸºæœ¬è®¤è¯åï¼Œç³»ç»Ÿä¼šæ˜¾ç¤ºå®šåˆ¶çš„æ·±è‰²ä¸»é¢˜ç™»å½•ç•Œé¢ï¼Œè€Œéæµè§ˆå™¨é»˜è®¤çš„Basic Authå¼¹çª—ã€‚

é…ç½®ï¼š
```toml
enable_basic_auth = true
credential = "username:password"
```

### 2. æ–‡ä»¶ç®¡ç†å™¨

å†…ç½®æ–‡ä»¶ç®¡ç†å™¨åŠŸèƒ½ï¼š

- âœ… ä¸Šä¼ æ–‡ä»¶ï¼ˆæ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼ ï¼‰
- âœ… ä¸‹è½½æ–‡ä»¶
- âœ… åˆ é™¤æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼ˆå¸¦ç¡®è®¤å¯¹è¯æ¡†ï¼‰
- âœ… æ–‡ä»¶å¤¹å¯¼èˆªï¼ˆé¢åŒ…å±‘å¯¼èˆªï¼‰
- âœ… é€’å½’æµè§ˆå­æ–‡ä»¶å¤¹
- âœ… å¯æ‹–æ‹½æŒ‰é’®ï¼ˆæ”¯æŒå››è¾¹å¸é™„ï¼‰

æ–‡ä»¶é»˜è®¤ä¸Šä¼ åˆ° `./uploads` ç›®å½•ã€‚

### 3. ç»ˆç«¯åŠŸèƒ½

åŸºäºxterm.jsçš„å®Œæ•´ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼š

- å®Œæ•´çš„ç»ˆç«¯ä»¿çœŸ
- å¤åˆ¶/ç²˜è´´æ”¯æŒ
- è‡ªé€‚åº”çª—å£å¤§å°
- 256è‰²æ”¯æŒ
- UTF-8æ”¯æŒ

## ğŸ› ï¸ å¼€å‘

### é¡¹ç›®ç»“æ„

```
gotty/
â”œâ”€â”€ main.go              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod               # Goæ¨¡å—å®šä¹‰
â”œâ”€â”€ Makefile            # æ„å»ºè„šæœ¬
â”œâ”€â”€ Dockerfile          # Dockeré•œåƒæ„å»º
â”œâ”€â”€ docker-compose.yml  # Dockerç¼–æ’
â”œâ”€â”€ .gotty              # é…ç½®æ–‡ä»¶æ¨¡æ¿ï¼ˆå«ä¸­æ–‡æ³¨é‡Šï¼‰
â”œâ”€â”€ server/             # æœåŠ¡å™¨é€»è¾‘
â”‚   â”œâ”€â”€ server.go       # HTTPæœåŠ¡å™¨
â”‚   â”œâ”€â”€ handlers.go     # è¯·æ±‚å¤„ç†
â”‚   â”œâ”€â”€ file_handler.go # æ–‡ä»¶ç®¡ç†API
â”‚   â”œâ”€â”€ auth_handler.go # è®¤è¯API
â”‚   â””â”€â”€ middleware.go   # ä¸­é—´ä»¶
â”œâ”€â”€ webtty/             # WebSocketç»ˆç«¯åè®®
â”œâ”€â”€ backend/            # åç«¯å‘½ä»¤æ‰§è¡Œ
â”œâ”€â”€ js/                 # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.ts           # å…¥å£æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ Login.tsx         # ç™»å½•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FileManager.tsx   # æ–‡ä»¶ç®¡ç†å™¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ webtty.tsx        # WebSocketç»ˆç«¯
â”‚   â”‚   â””â”€â”€ xterm.tsx         # xtermå°è£…
â”‚   â”œâ”€â”€ package.json    # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ webpack.config.js # Webpacké…ç½®
â”œâ”€â”€ resources/          # é™æ€èµ„æº
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ login.css       # ç™»å½•ç•Œé¢æ ·å¼
â”‚   â””â”€â”€ filemanager.css # æ–‡ä»¶ç®¡ç†å™¨æ ·å¼
â””â”€â”€ bindata/            # ç¼–è¯‘åçš„é™æ€èµ„æº
```

### å‰ç«¯å¼€å‘

```bash
cd js

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆå¸¦source mapï¼‰
DEV=1 make

# ç”Ÿäº§æ„å»º
make
```

å‰ç«¯ä½¿ç”¨ï¼š
- **TypeScript** - ç±»å‹å®‰å…¨
- **Preact** - è½»é‡çº§Reactæ›¿ä»£
- **Webpack 5** - æ¨¡å—æ‰“åŒ…
- **xterm.js** - ç»ˆç«¯æ¨¡æ‹Ÿå™¨

### åç«¯å¼€å‘

```bash
# è¿è¡Œæµ‹è¯•
go test ./...

# æ ¼å¼åŒ–ä»£ç 
go fmt ./...

# é™æ€æ£€æŸ¥
go vet ./...
```

### æ„å»ºè¯´æ˜

é¡¹ç›®é‡‡ç”¨å¤šé˜¶æ®µæ„å»ºï¼š

1. **å‰ç«¯æ„å»º** - Webpackæ‰“åŒ…JS/CSSèµ„æº
2. **èµ„æºåµŒå…¥** - å°†é™æ€èµ„æºåµŒå…¥åˆ°GoäºŒè¿›åˆ¶æ–‡ä»¶
3. **Goç¼–è¯‘** - ç¼–è¯‘æœ€ç»ˆå¯æ‰§è¡Œæ–‡ä»¶

## ğŸ“ æ›´æ–°æ—¥å¿—

### å½“å‰ç‰ˆæœ¬ç‰¹æ€§

- âœ… è‡ªå®šä¹‰æ·±è‰²ä¸»é¢˜ç™»å½•ç•Œé¢
- âœ… æ–‡ä»¶ç®¡ç†å™¨ï¼ˆä¸Šä¼ /ä¸‹è½½/åˆ é™¤/æµè§ˆï¼‰
- âœ… æ–‡ä»¶å¤¹é€’å½’å¯¼èˆª
- âœ… å¯æ‹–æ‹½æ–‡ä»¶ç®¡ç†æŒ‰é’®ï¼ˆå››è¾¹å¸é™„ï¼‰
- âœ… è‡ªå®šä¹‰ä¸»é¢˜åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
- âœ… WebSocketè®¤è¯æ”¯æŒ
- âœ… ç”Ÿäº§æ„å»ºè‡ªåŠ¨ç§»é™¤consoleæ—¥å¿—
- âœ… Dockerå®¹å™¨åŒ–æ”¯æŒ
- âœ… å®Œæ•´ä¸­æ–‡é…ç½®æ³¨é‡Š

## ğŸ”’ å®‰å…¨å»ºè®®

1. **ä½¿ç”¨HTTPS** - ç”Ÿäº§ç¯å¢ƒå¯ç”¨TLSåŠ å¯†
2. **å¼ºå¯†ç ** - è®¾ç½®å¤æ‚çš„è®¤è¯å‡­æ®
3. **é˜²ç«å¢™** - é™åˆ¶è®¿é—®æ¥æºIP
4. **åå‘ä»£ç†** - ä½¿ç”¨Nginxç­‰åå‘ä»£ç†
5. **å®šæœŸæ›´æ–°** - ä¿æŒä¾èµ–å’Œç³»ç»Ÿæ›´æ–°

ç¤ºä¾‹Nginxé…ç½®ï¼š

```nginx
server {
    listen 443 ssl;
    server_name your-domain.com;

    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;

    location / {
        proxy_pass http://127.0.0.1:8080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºã€‚

## ğŸ™ è‡´è°¢

æœ¬é¡¹ç›®åŸºäºä»¥ä¸‹é¡¹ç›®ï¼š

- [yudai/gotty](https://github.com/yudai/gotty) - åŸå§‹GoTTYé¡¹ç›®
- [sorenisanerd/gotty](https://github.com/sorenisanerd/gotty) - ç»´æŠ¤ç‰ˆæœ¬
- [xterm.js](https://github.com/xtermjs/xterm.js) - ç»ˆç«¯æ¨¡æ‹Ÿå™¨
- [Preact](https://preactjs.com/) - UIæ¡†æ¶

## ğŸ“® è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤Issueã€‚